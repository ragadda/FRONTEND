{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ragad Fares\\\\Desktop\\\\front\\\\src\\\\components\\\\cart\\\\CartComponent.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Swal from 'sweetalert2';\nimport MealService from '../../services/MealService';\nimport { Modal, Button } from 'react-bootstrap';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { editItem, deleteItem, deleteAllItems } from '../../store-redux/cart/cartSlice';\nimport { useDispatch, useSelector } from 'react-redux';\nimport EditItemQuantityComponent from './EditItemQuantityComponent';\nimport InsertDetailsNotLoggedComponent from './InsertDetailsNotLoggedComponent';\nimport './CartComponent.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst CartComponent = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [showEdit, setShowEdit] = useState(false);\n  const [showInsertDetails, setShowInsertDetails] = useState(false);\n  const [id, setId] = useState(0);\n  const [item, setItem] = useState(null);\n  const [itemQuantity, setItemQuantity] = useState(1);\n  const [address, setAddress] = useState('');\n  const [phoneNumber, setPhoneNumber] = useState('');\n  var finalPriceVar;\n  const [finalPrice, setFinalPrice] = useState(0);\n  const itemsFromCart = useSelector(state => state.cart);\n  const itemsFromCartFinalOrder = {\n    itemsFromCart,\n    address,\n    phoneNumber,\n    finalPrice,\n    setAddress,\n    setPhoneNumber\n  };\n  let itemsFromCartData; //ako nije ulogovan mora da unese adresu i br telefona\n\n  const itemObjToStore = {\n    item,\n    itemQuantity\n  };\n  useEffect(() => {\n    console.log(\"itemsfromcart\" + JSON.stringify(itemsFromCart));\n  }, []);\n\n  const handleShowEdit = itemFromCart => {\n    setShowEdit(true);\n    setId(null); //mora ovako da se setuje, kada se vrsi izmena, nakon toga zapamti id od starog pa radi izmenu\n\n    setItem(itemFromCart);\n    setItemQuantity(itemFromCart.quantity);\n  };\n\n  const handleCloseEdit = () => {\n    setShowEdit(false);\n    setItem(null);\n  };\n\n  const alertAreYouSureDelete = id => {\n    Swal.fire({\n      title: 'Are you sure?',\n      text: \"If you click yes, items will be deleted!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, delete it!'\n    }).then(result => {\n      if (result.isConfirmed) {\n        dispatch(deleteItem(id));\n        Swal.fire('Deleted!', 'Item has been deleted!', 'success');\n      }\n    });\n  };\n\n  const submitFinalOrder = () => {\n    //moze i bez ove provere za token jer svakako ova metoda se poziva samo nakon unosenja adrese i broja telefona u modalu kada korisnik nije ulogovan\n    if ((localStorage.token === null || localStorage.token === undefined) && (address.trim() === \"\" || phoneNumber.trim() === \"\")) {\n      alertInvalidInput(\"Invalid input, please insert address and phone number\");\n    } else if ((localStorage.token === null || localStorage.token === undefined) && !isValidNumber(phoneNumber)) {\n      alertInvalidInput(\"Invalid phone number or it has less than 5 digits\");\n    } else {\n      alertAreYouSureFinalOrder();\n    }\n  };\n\n  const alertInvalidInput = message => {\n    Swal.fire({\n      icon: 'error',\n      title: 'Oops...',\n      text: message\n    });\n  };\n\n  const isValidNumber = input => {\n    // ^\\d{5,}$: Uses a regular expression to ensure that the input consists of at least 5 digits. \n    // Here's a breakdown:\n    // ^: Asserts the start of the string.\n    // \\d{5,}: Matches at least 5 digits (\\d is a shorthand for a digit, and {5,} means at least 5 occurrences).\n    // $: Asserts the end of the string.\n    if (isNaN(input) || /^\\d{5,}$/.test(input) === false) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  const checkIfLoggedInBeforeSubmit = () => {\n    if (localStorage.token === null || localStorage.token === undefined) {\n      handleShowInsertDetails();\n    } else {\n      alertAreYouSureFinalOrder();\n    }\n  };\n\n  const handleShowInsertDetails = () => {\n    sumFinalPrice();\n    setFinalPrice(finalPriceVar);\n    setShowInsertDetails(true);\n  };\n\n  const handleCloseInsertDetails = () => {\n    setShowInsertDetails(false);\n    setAddress('');\n    setPhoneNumber('');\n  };\n\n  const alertAreYouSureFinalOrder = () => {\n    sumFinalPrice();\n    setFinalPrice(finalPriceVar);\n    let textStr;\n\n    if (localStorage.token === null || localStorage.token === undefined) {\n      textStr = \"Final price is: \" + finalPriceVar.toFixed(2) + \" RSD! If you click yes, you will make final order!\";\n      itemsFromCartData = {\n        itemsFromCart,\n        address,\n        phoneNumber,\n        finalPrice: finalPriceVar\n      };\n    } else {\n      textStr = \"Final price is: \" + finalPriceVar.toFixed(2) + \" RSD (10% OFF)! If you click yes, you will make final order!\";\n      itemsFromCartData = {\n        itemsFromCart,\n        finalPrice: finalPriceVar\n      };\n    }\n\n    Swal.fire({\n      title: 'Are you sure?',\n      text: textStr,\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, make it!'\n    }).then(result => {\n      if (result.isConfirmed) {\n        sendFinalOrderAndHandleRepsonseFromServer(itemsFromCartData);\n      } else {\n        finalPriceVar = 0;\n      }\n    });\n  };\n\n  const sendFinalOrderAndHandleRepsonseFromServer = finalOrderDetails => {\n    MealService.sendItemsForFinalOrder(finalOrderDetails).then(response => {\n      const responseFromServer = response.data; //ako je response razlicit od 0, znaci da je uspesno upisan final order i prosledjen id, po defaultu je 0\n\n      if (responseFromServer != 0) {\n        dispatch(deleteAllItems()); // bude undefined u stvari, null == undefined ce biti true, null === undefined je false. mogu i proveriti samo sa == null\n\n        if (localStorage.token === null || localStorage.token === undefined) {\n          handleCloseInsertDetails();\n          alertFinalOrderStringCheckInfo(responseFromServer);\n        } else {\n          alertSuccess(\"Successfully ordered items!\");\n          setTimeout(() => navigate(\"/my-active-final-orders\"), 1500);\n        }\n      } else {\n        alertInvalidInput(\"Failed to make final order! Try again!\");\n      }\n    });\n  };\n\n  const sumFinalPrice = () => {\n    finalPriceVar = 0;\n\n    if (localStorage.token == null || localStorage.token == '') {\n      for (let i = 0; i < itemsFromCart.length; i++) {\n        console.log(itemsFromCart[i].mealPrice);\n        finalPriceVar += itemsFromCart[i].mealPrice * itemsFromCart[i].quantity;\n      }\n    } else {\n      for (let i = 0; i < itemsFromCart.length; i++) {\n        finalPriceVar += itemsFromCart[i].mealPrice * 0.9 * itemsFromCart[i].quantity;\n      }\n    }\n  };\n\n  const editItemQuantity = () => {\n    dispatch(editItem(itemObjToStore));\n    handleCloseEdit();\n    alertSuccess(\"Successfully edited item quantity!\");\n  };\n\n  const alertSuccess = message => {\n    Swal.fire({\n      position: 'top',\n      icon: 'success',\n      title: message,\n      showConfirmButton: false,\n      timer: 1500\n    });\n  };\n\n  const alertFinalOrderStringCheckInfo = finalOrderId => {\n    let linkStr = \"/final-order/\" + finalOrderId;\n    let textStr = \"localhost:3000/final-order/\" + finalOrderId;\n    Swal.fire({\n      title: 'Successfully ordered items! You can check status opening this link',\n      icon: 'success',\n      html: `<a href=${linkStr}>${textStr}</a>`,\n      showCloseButton: true,\n      focusConfirm: false,\n      confirmButtonText: '<i class=\"fa fa-thumbs-up\"></i> Okay!',\n      confirmButtonAriaLabel: 'Thumbs up, great!'\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-main-container\",\n      children: [itemsFromCart.length !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-title\",\n        children: [\"Items from cart\", /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"cart-icon-svg-title\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          height: \"1em\",\n          viewBox: \"0 0 576 512\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 114\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 35\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-title\",\n        children: \"Cart is empty\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 7\n      }, this), itemsFromCart.length !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-container\",\n        children: [itemsFromCart.map(itemFromCart => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-item-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-image-container\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"item-meal-pic\",\n                src: \"data:image/png;base64,\" + itemFromCart.mealImage,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-info-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item-name-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-name-text\",\n                  children: itemFromCart.mealName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-type-text\",\n                  children: [\"(\", itemFromCart.mealTypeName, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item-description\",\n                children: itemFromCart.mealDescription\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item-price\",\n                children: [itemFromCart.mealPrice, \",00 RSD\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item-quantity\",\n                children: [\"x\", itemFromCart.quantity]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-action-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"action-icon-mobile update\",\n                onClick: () => handleShowEdit(itemFromCart),\n                xmlns: \"http://www.w3.org/2000/svg\",\n                height: \"1em\",\n                viewBox: \"0 0 512 512\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 172\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-icon-container update\",\n                onClick: () => handleShowEdit(itemFromCart),\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-action update\",\n                  children: \"Update\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"action-icon update\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  height: \"1em\",\n                  viewBox: \"0 0 512 512\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 125\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"action-icon-mobile delete\",\n                onClick: () => alertAreYouSureDelete(itemFromCart.mealId),\n                xmlns: \"http://www.w3.org/2000/svg\",\n                height: \"1em\",\n                viewBox: \"0 0 448 512\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 189\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-icon-container delete\",\n                onClick: () => alertAreYouSureDelete(itemFromCart.mealId),\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-action delete\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"action-icon delete\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  height: \"1em\",\n                  viewBox: \"0 0 448 512\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 125\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this);\n        }), itemsFromCart.length !== 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-send-final-order\",\n          onClick: () => checkIfLoggedInBeforeSubmit(),\n          children: [\"Send final order\", /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"icon-send-final-order\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            height: \"1em\",\n            viewBox: \"0 0 512 512\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 118\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 40\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 36\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showEdit,\n      onHide: handleCloseEdit,\n      dialogClassName: \"modalCustomEdit\",\n      className: \"d-flex align-items-center justify-content-center\",\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Edit quantity\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(EditItemQuantityComponent, {\n          itemFromCart: item,\n          itemQuantity: itemQuantity,\n          setItemQuantity: setItemQuantity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => editItemQuantity(),\n          children: \"Save changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: handleCloseEdit,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showInsertDetails,\n      onHide: handleCloseInsertDetails,\n      dialogClassName: \"modalCustomInsertDetails\",\n      className: \"d-flex align-items-center justify-content-center\",\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Insert neccessary details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(InsertDetailsNotLoggedComponent, {\n          details: itemsFromCartFinalOrder\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => submitFinalOrder(),\n          children: \"Confirm final order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: handleCloseInsertDetails,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s(CartComponent, \"jlancWwlrQDLuxi9U7X0AiXQqPQ=\", false, function () {\n  return [useDispatch, useNavigate, useSelector];\n});\n\n_c = CartComponent;\nexport default CartComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartComponent\");","map":{"version":3,"names":["React","useState","useEffect","Swal","MealService","Modal","Button","Link","useNavigate","useParams","editItem","deleteItem","deleteAllItems","useDispatch","useSelector","EditItemQuantityComponent","InsertDetailsNotLoggedComponent","CartComponent","dispatch","navigate","showEdit","setShowEdit","showInsertDetails","setShowInsertDetails","id","setId","item","setItem","itemQuantity","setItemQuantity","address","setAddress","phoneNumber","setPhoneNumber","finalPriceVar","finalPrice","setFinalPrice","itemsFromCart","state","cart","itemsFromCartFinalOrder","itemsFromCartData","itemObjToStore","console","log","JSON","stringify","handleShowEdit","itemFromCart","quantity","handleCloseEdit","alertAreYouSureDelete","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","submitFinalOrder","localStorage","token","undefined","trim","alertInvalidInput","isValidNumber","alertAreYouSureFinalOrder","message","input","isNaN","test","checkIfLoggedInBeforeSubmit","handleShowInsertDetails","sumFinalPrice","handleCloseInsertDetails","textStr","toFixed","sendFinalOrderAndHandleRepsonseFromServer","finalOrderDetails","sendItemsForFinalOrder","response","responseFromServer","data","alertFinalOrderStringCheckInfo","alertSuccess","setTimeout","i","length","mealPrice","editItemQuantity","position","showConfirmButton","timer","finalOrderId","linkStr","html","showCloseButton","focusConfirm","confirmButtonAriaLabel","map","mealImage","mealName","mealTypeName","mealDescription","mealId"],"sources":["C:/Users/Ragad Fares/Desktop/front/src/components/cart/CartComponent.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport Swal from 'sweetalert2';\nimport MealService from '../../services/MealService'\nimport { Modal, Button } from 'react-bootstrap'\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport {editItem, deleteItem, deleteAllItems} from '../../store-redux/cart/cartSlice'\nimport { useDispatch, useSelector } from 'react-redux';\nimport EditItemQuantityComponent from './EditItemQuantityComponent';\nimport InsertDetailsNotLoggedComponent from './InsertDetailsNotLoggedComponent';\nimport './CartComponent.css';\n\nconst CartComponent = () => {\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const [showEdit, setShowEdit] = useState(false);\n  const [showInsertDetails, setShowInsertDetails] = useState(false);\n\n  const [id, setId] = useState(0);\n  const [item, setItem] = useState(null);\n  const [itemQuantity, setItemQuantity] = useState(1);\n\n  const [address, setAddress] = useState('');\n  const [phoneNumber, setPhoneNumber] = useState('');\n  var finalPriceVar;\n  \n  const [finalPrice, setFinalPrice] = useState(0);\n\n  const itemsFromCart = useSelector((state) => state.cart);\n  const itemsFromCartFinalOrder = { itemsFromCart, address, phoneNumber, finalPrice, setAddress, setPhoneNumber };\n\n  let itemsFromCartData;\n\n  //ako nije ulogovan mora da unese adresu i br telefona\n  \n  const itemObjToStore = { item, itemQuantity}\n\n    useEffect(() => {\n      console.log(\"itemsfromcart\" + JSON.stringify(itemsFromCart));\n  }, [])\n\n    const handleShowEdit = (itemFromCart) => {\n        setShowEdit(true);\n        setId(null); //mora ovako da se setuje, kada se vrsi izmena, nakon toga zapamti id od starog pa radi izmenu\n        setItem(itemFromCart);\n        setItemQuantity(itemFromCart.quantity)\n    };\n\n    const handleCloseEdit = () => {\n        setShowEdit(false);\n        setItem(null)\n    }\n\n    const alertAreYouSureDelete = (id) =>{\n        Swal.fire({\n          title: 'Are you sure?',\n          text: \"If you click yes, items will be deleted!\",\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonColor: '#3085d6',\n          cancelButtonColor: '#d33',\n          confirmButtonText: 'Yes, delete it!'\n        }).then((result) => {\n          if (result.isConfirmed) {\n            dispatch(deleteItem(id));\n            Swal.fire(\n              'Deleted!',\n              'Item has been deleted!',\n              'success'\n            )\n          }\n        })\n      }\n         \n      const submitFinalOrder = () =>{\n        //moze i bez ove provere za token jer svakako ova metoda se poziva samo nakon unosenja adrese i broja telefona u modalu kada korisnik nije ulogovan\n        if((localStorage.token === null || localStorage.token === undefined) && (address.trim() === \"\" || phoneNumber.trim() === \"\")){\n          alertInvalidInput(\"Invalid input, please insert address and phone number\");\n        }\n        else if((localStorage.token === null || localStorage.token === undefined) && !isValidNumber(phoneNumber)){\n          alertInvalidInput(\"Invalid phone number or it has less than 5 digits\");\n        }\n        else{\n          alertAreYouSureFinalOrder();\n        }\n      }\n\n      const alertInvalidInput = (message) =>{\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: message,\n        })\n      }\n\n      const isValidNumber = (input) => {\n        // ^\\d{5,}$: Uses a regular expression to ensure that the input consists of at least 5 digits. \n        // Here's a breakdown:\n        // ^: Asserts the start of the string.\n        // \\d{5,}: Matches at least 5 digits (\\d is a shorthand for a digit, and {5,} means at least 5 occurrences).\n        // $: Asserts the end of the string.\n        if(isNaN(input) || /^\\d{5,}$/.test(input) === false){\n          return false;\n        }\n        else{\n          return true;\n        }\n      }\n\n      const checkIfLoggedInBeforeSubmit = () =>{\n        if(localStorage.token === null || localStorage.token === undefined){\n          handleShowInsertDetails();\n        }\n        else{\n          alertAreYouSureFinalOrder();\n        }\n      }\n\n      const handleShowInsertDetails = () =>{\n        sumFinalPrice();\n        setFinalPrice(finalPriceVar);\n        setShowInsertDetails(true);\n      }\n\n      const handleCloseInsertDetails = () =>{\n        setShowInsertDetails(false);\n        setAddress('');\n        setPhoneNumber(''); \n      }\n    \n      const alertAreYouSureFinalOrder = () =>{\n        sumFinalPrice();\n        setFinalPrice(finalPriceVar);\n        let textStr;\n        if(localStorage.token === null || localStorage.token === undefined){\n          textStr = \"Final price is: \"+ finalPriceVar.toFixed(2) + \" RSD! If you click yes, you will make final order!\";\n          itemsFromCartData = { itemsFromCart, address, phoneNumber, finalPrice: finalPriceVar};\n          \n        }\n        else{\n          textStr = \"Final price is: \"+ finalPriceVar.toFixed(2) + \" RSD (10% OFF)! If you click yes, you will make final order!\";\n          itemsFromCartData = { itemsFromCart, finalPrice: finalPriceVar};\n        }\n        Swal.fire({\n          title: 'Are you sure?',\n          text: textStr,\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonColor: '#3085d6',\n          cancelButtonColor: '#d33',\n          confirmButtonText: 'Yes, make it!'\n        }).then((result) => {\n          if (result.isConfirmed) {\n            sendFinalOrderAndHandleRepsonseFromServer(itemsFromCartData);\n          }\n          else{\n            finalPriceVar = 0;\n          }\n        })\n      }\n\n      const sendFinalOrderAndHandleRepsonseFromServer = (finalOrderDetails) =>{\n        MealService.sendItemsForFinalOrder(finalOrderDetails).then((response) =>{\n          const responseFromServer = response.data;\n          //ako je response razlicit od 0, znaci da je uspesno upisan final order i prosledjen id, po defaultu je 0\n          if(responseFromServer != 0){\n              dispatch(deleteAllItems());\n              // bude undefined u stvari, null == undefined ce biti true, null === undefined je false. mogu i proveriti samo sa == null\n              if(localStorage.token === null || localStorage.token === undefined){\n                handleCloseInsertDetails();\n                alertFinalOrderStringCheckInfo(responseFromServer);\n              }\n              else{\n                alertSuccess(\"Successfully ordered items!\");\n                setTimeout(() => navigate(\"/my-active-final-orders\"), 1500);\n              }     \n          }\n          else{\n            alertInvalidInput(\"Failed to make final order! Try again!\");\n          }\n        })\n      }\n\n      const sumFinalPrice = () =>{\n        finalPriceVar = 0;\n        if(localStorage.token == null || localStorage.token == ''){\n          for(let i=0; i<itemsFromCart.length; i++){\n            console.log(itemsFromCart[i].mealPrice);\n            finalPriceVar += itemsFromCart[i].mealPrice*itemsFromCart[i].quantity;\n          }\n        }\n        else{\n          for(let i=0; i<itemsFromCart.length; i++){\n            finalPriceVar += (itemsFromCart[i].mealPrice)*0.9*itemsFromCart[i].quantity;\n          }\n        }\n      }\n\n      const editItemQuantity = () =>{\n        dispatch(editItem(itemObjToStore));\n        handleCloseEdit();\n        alertSuccess(\"Successfully edited item quantity!\");\n      }\n\n      const alertSuccess = (message) =>{\n        Swal.fire({\n          position: 'top',\n          icon: 'success',\n          title: message,\n          showConfirmButton: false,\n          timer: 1500\n        });\n      }\n\n      const alertFinalOrderStringCheckInfo = (finalOrderId) =>{\n        let linkStr = \"/final-order/\"+finalOrderId;\n        let textStr = \"localhost:3000/final-order/\"+finalOrderId;\n        Swal.fire({\n          title: 'Successfully ordered items! You can check status opening this link',\n          icon: 'success',\n          html:\n            `<a href=${linkStr}>${textStr}</a>`,\n          showCloseButton: true,\n          focusConfirm: false,\n          confirmButtonText:\n            '<i class=\"fa fa-thumbs-up\"></i> Okay!',\n          confirmButtonAriaLabel: 'Thumbs up, great!',\n        })\n      }\n\n  return (\n    <>\n    <div className='cart-main-container'>\n    {itemsFromCart.length !== 0 ? <div className='cart-title'>\n      Items from cart\n      <svg className='cart-icon-svg-title' xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 576 512\"><path d=\"M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z\"/></svg>\n      </div> \n      : \n      <div className='cart-title'>Cart is empty</div>\n    }\n\n    {itemsFromCart.length !== 0 && <div className='cart-container'>\n    {\n      itemsFromCart.map((itemFromCart) => {\n          return(\n            <div className='cart-item-container'>\n              <div className='item-image-container'>                  \n                <img className='item-meal-pic' src={\"data:image/png;base64,\" + itemFromCart.mealImage} alt=''/>                   \n              </div> \n              \n              <div className='item-info-container'>\n                <div className='item-name-container'>\n                  <div className='item-name-text'>\n                  {itemFromCart.mealName}\n                  </div>\n                  <div className='item-type-text'>\n                    ({itemFromCart.mealTypeName})\n                  </div>\n                </div>\n                <div className='item-description'>\n                  {itemFromCart.mealDescription}\n                </div>\n                <div className='item-price'>\n                  {itemFromCart.mealPrice},00 RSD\n                </div>\n                <div className='item-quantity'>\n                  x{itemFromCart.quantity}\n                </div>\n              </div>\n\n              <div className='item-action-container'>\n              <svg className='action-icon-mobile update' onClick={() =>handleShowEdit(itemFromCart)} xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 512 512\"><path d=\"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z\"/></svg>\n                <div className='button-icon-container update' onClick={() =>handleShowEdit(itemFromCart)}>\n                  <button className='btn-action update' >Update</button>\n                  <svg className='action-icon update' xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 512 512\"><path d=\"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z\"/></svg>\n                </div>\n\n                <svg className='action-icon-mobile delete' onClick={() => alertAreYouSureDelete(itemFromCart.mealId)} xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 448 512\"><path d=\"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z\"/></svg>\n                <div className='button-icon-container delete' onClick={() => alertAreYouSureDelete(itemFromCart.mealId)}>\n                  <button className='btn-action delete' >Delete</button> \n                  <svg className='action-icon delete' xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 448 512\"><path d=\"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z\"/></svg>\n                </div>\n              </div>\n          </div>\n          )\n      })\n    }\n\n        {itemsFromCart.length !== 0 && <button className=\"btn-send-final-order\" onClick={() => checkIfLoggedInBeforeSubmit()}>\n        Send final order\n        <svg className='icon-send-final-order' xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 512 512\"><path d=\"M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z\"/></svg>\n        </button>}\n    </div>}\n\n\n\n\n</div>\n\n    <Modal show={showEdit} onHide={handleCloseEdit} dialogClassName=\"modalCustomEdit\" className=\"d-flex align-items-center justify-content-center\">\n        <Modal.Header closeButton>\n            <Modal.Title>Edit quantity</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n            <EditItemQuantityComponent itemFromCart={item} itemQuantity={itemQuantity} setItemQuantity={setItemQuantity} />\n        </Modal.Body>\n\n        <Modal.Footer>\n            <Button variant=\"primary\" onClick={()=>editItemQuantity()}>Save changes</Button>\n            <Button variant=\"secondary\" onClick={handleCloseEdit}>Close</Button>\n        </Modal.Footer>\n    </Modal> \n  \n    <Modal show={showInsertDetails} onHide={handleCloseInsertDetails} dialogClassName=\"modalCustomInsertDetails\" className=\"d-flex align-items-center justify-content-center\">\n        <Modal.Header closeButton>\n            <Modal.Title>Insert neccessary details</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n            <InsertDetailsNotLoggedComponent details={itemsFromCartFinalOrder} />\n        </Modal.Body>\n\n        <Modal.Footer>\n            <Button variant=\"primary\" onClick={() => submitFinalOrder()}>Confirm final order</Button>\n            <Button variant=\"secondary\" onClick={handleCloseInsertDetails}>Close</Button>\n        </Modal.Footer>\n    </Modal> \n    </>\n  )\n}\n\nexport default CartComponent"],"mappings":"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"},"metadata":{},"sourceType":"module"}